% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
]{interact}

\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\setcounter{secnumdepth}{5}
% Make \paragraph and \subparagraph free-standing
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newlength{\cslentryspacingunit} % times entry-spacing
\setlength{\cslentryspacingunit}{\parskip}
\newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
 {% don't indent paragraphs
  \setlength{\parindent}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1
  \let\oldpar\par
  \def\par{\hangindent=\cslhangindent\oldpar}
  \fi
  % set entry spacing
  \setlength{\parskip}{#2\cslentryspacingunit}
 }%
 {}
\usepackage{calc}
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}

\usepackage{orcidlink}
\makeatletter
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\makeatletter
\@ifpackageloaded{tcolorbox}{}{\usepackage[many]{tcolorbox}}
\makeatother
\makeatletter
\@ifundefined{shadecolor}{\definecolor{shadecolor}{rgb}{.97, .97, .97}}
\makeatother
\makeatletter
\makeatother
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={A Tidy Framework and Infrastructure to Systematically Assemble Spatio-temporal Indexes from Multivariate Data},
  pdfauthor={H. Sherry Zhang; Dianne Cook; Ursula Laa; Nicolas Langrené; Patricia Menéndez},
  pdfkeywords={indexes, data pipeline, software design},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}

\title{A Tidy Framework and Infrastructure to Systematically Assemble
Spatio-temporal Indexes from Multivariate Data}
\author{H. Sherry
Zhang$\textsuperscript{1}$~\orcidlink{0000-0002-7122-1463}, Dianne
Cook$\textsuperscript{1}$~\orcidlink{0000-0002-3813-7155}, Ursula
Laa$\textsuperscript{2}$~\orcidlink{0000-0002-0249-6439}, Nicolas
Langrené$\textsuperscript{3}$~\orcidlink{0000-0001-7601-4618}, Patricia
Menéndez$\textsuperscript{1}$~\orcidlink{0000-0003-0701-6315}}

\thanks{CONTACT: H. Sherry
Zhang. Email: \href{mailto:huize.zhang@monash.edu}{\nolinkurl{huize.zhang@monash.edu}}. }
\begin{document}
\captionsetup{labelsep=space}
\maketitle
\textsuperscript{1} Department of Econometrics and Business
Statistics, Monash University, Melbourne,
Victoria, Australia\\ \textsuperscript{2} Institute of
Statistics, University of Natural Resources and Life
Sciences, Vienna, Austria\\ \textsuperscript{3} Department of
Mathematical Sciences, BNU-HKBU United International College, Zhuhai,
Guangdong, China
\begin{abstract}
\begin{itemize}
\tightlist
\item
  indexes, useful, quantify severity, early monitoring,
\item
  A huge number of indexes have been proposed by domain experts,
  however, a large majority of them are not being adopted, reused, and
  compared in research or in practice.
\item
  One of the reasons for this is the plenty of indexes are quite complex
  and there is no obvious easy-to-use implementation to apply them to
  user's data.
\item
  The paper describes a general pipeline framework to construct indexes
  from spatio-temporal data,
\item
  This allows all the indexes to be constructed through a uniform data
  pipeline and different indexes to vary on the details of each step in
  the data pipeline and their orders.
\item
  The pipeline proposed aim to smooth the workflow of index construction
  through breaking down the complicated steps proposed by various
  indexes into small building blocks shared by most of the indexes.
\item
  The framework will be demonstrated with drought indexes as examples,
  but appliable in general to environmental indexes constructed from
  multivariate spatio-temporal data
\end{itemize}
\end{abstract}
\begin{keywords}
\def\sep{;\ }
indexes\sep data pipeline\sep 
software design
\end{keywords}
\ifdefined\Shaded\renewenvironment{Shaded}{\begin{tcolorbox}[boxrule=0pt, enhanced, interior hidden, breakable, borderline west={3pt}{0pt}{shadecolor}, sharp corners, frame hidden]}{\end{tcolorbox}}\fi

\hypertarget{introduction}{%
\section{Introduction}\label{introduction}}

Indexes are commonly used to combine and summarize different sources of
information into a single number for monitoring, communicating, and
decision-making. Examples of those include the Air Quality Index, El
Niño-Southern Oscillation Index, Consumer Price Index, QS University
Rankings or Human Development Index among many others.

To construct an index, experts typically start by defining a concept of
interest that requires measurement. This concept often lacks a direct
measurable attribute or can only be measure as a composite of various
processes, yet it holds social and public significance. To create an
index, once the underlying processes involved are identified, relevant
and available variables are then defined, collected, and combined using
statistical methods into an index that aims at measure the process of
interest. The construction process is often not straightforward, and
decisions need to be made, such as the selection of variables to be
included, which might depend on data availability and the statistical
definition of the index to be used, among others. For instance, the
indexes constructed from linear combination of variables need to decide
on the weight assigned to each variable. Some indexes have a spatial
and/or temporal components, and variables can be aggregated to different
spatial resolutions and temporal scales, leading to various indexes for
different monitoring purposes. Hence, all these decisions can result in
different index values and have different practical implications.

To be able to test different decision choices systematically for an
index, the index needs to be broken down into its fundamental building
blocks to analyse the contribution and effect of each component. We call
this process of breaking the index construction into different steps the
index pipeline. Such decomposition of index components provides the
means to standardise index construction via a pipeline and offers
benefits for comparing among indexes and calculating index uncertainty.
In social indexes for instance, the OECD handbook (OECD, European Union,
and Joint Research Centre - European Commission 2008) has provided a set
of steps and recommendations for constructing composite socio-economic
indexes. However, there is still a need to extend these guidelines and
methods to accommodate the inclusion of more methodological complex
steps required for indexes in general.

In this work, we aim at providing statistical and computational methods
to develop a data pipeline framework for constructing and customize
indexes using data. As a companion the R package, tidyindex, is
developed to construct and explore different. Furthermore, the tidyindex
package can be used to explore the effects of changes on index
definition, index construction steps, and construction methods. This
work provides researchers actively developing new indexes or aiming at
improving indexes with the tools to easily modify and evaluate indexes.
It also helps index analysts diagnose indexes, carry out sensitivity
analysis to assess small perturbations in the index, and identify
potential weaknesses for methodology improvement.

The rest of the paper is structured as follows:
Section~\ref{sec-pipeline} reviews the concept of data pipeline in R.
The pipeline framework for index construction is presented in
\textbf{?@sec-index-pipeline}. Section~\ref{sec-dev} explains how to add
new steps into the index methodology in the form of new building blocks
inside the index construction pipeline. Examples are given in
Section~\ref{sec-examples} to demonstrate the index construction with
the pipeline built.

\hypertarget{sec-pipeline}{%
\section{Tidy framework}\label{sec-pipeline}}

The tidy framework consists of two key components: tidy data and tidy
tools. The concept of tidy data (Wickham 2014) prescribes specific rules
for organising data in an analysis, with observations as rows, variables
as columns, and types of observational units as tables. Tidy tools, on
the other hand, are concatenated in a sequence through which the tidy
data flows, creating a pipeline for data processing and modelling. These
pipelines are data centric, meaning all the tidy tools or functions take
a tidy data object as inputs and return a processed tidy data object,
directly ready for the next operations to be applied. Also, the pipeline
approach corresponds to the modular programming practice, which breaks
down complex problems into smaller and more manageable pieces, as oppose
to a monolithic design, where all the steps are predetermined and
integrated into a single piece. The flexibility provided by the
modularity makes it easier to modify certain steps in the pipeline and
to maintain and extend the code base.

Examples of using a pipeline approach for data analysis can be traced
back to the interactive graphics literature, including Buja et al.
(1988); Sutherland et al. (2000); Xie, Hofmann, and Cheng (2014);
Wickham et al. (2009). Wickham et al. (2009) argues that whether made
explicit or not, a pipeline has to be presented in every graphics
program and making them explicit is beneficial for understanding the
implementation and comparing between different graphic systems. While
this comment is made in the context of interactive graphics program, it
is also applicable generally to any data analysis workflow. More
recently, the tidyverse suite (Wickham et al. 2019) takes the pipeline
approach for general-purpose data wrangling and has gained popularity
within the R community. The pipeline-style code can be directly read as
a series of operations applied successively on tidy data object,
offering a method to document the data wrangling process with all the
computational details for reproducibility.

Since the success of tidyverse, more packages have been developed to
analyze data using the tidy framework for domains specific applications,
a noticeable example of which is \texttt{tidymodels} for building
machine learning models (Kuhn and Wickham 2020). To create a tidy
workflow tailored to a specific domain, developers first need to
identify the fundamental building blocks to create a workflow. These
components are then implemented as modules, which can be combined to
form the pipeline. For example, in supervised machine learning models,
steps such as data splitting, model training and model evaluation are
commonly used in most workflow. In the \texttt{tidymodels}, these steps
are correspondingly implemented as package \texttt{rsample},
\texttt{parsnip}, and \texttt{yardstick}, agnostic to the specific model
chosen. The uniform interface in tidymodels frees analysts from
recalling model-specific syntax for performing the same operation across
different models, increasing the efficiency to work with different
models simultaneously.

For constructing indexes, the pipeline approach adopts explicit and
standalone modules that can be assembled in different ways. Index
developers can choose the appropriate modules and arrange them
accordingly to generate the data pipeline that is needed for their
purpose. The pipeline approach provides many advantages:

\begin{itemize}
\tightlist
\item
  makes the computation more transparent, and thus more easily debugged.
\item
  allows for rapidly processing new data to check how different
  features, like outliers, might affect the index value.
\item
  provides the capacity to measure uncertainty by computing confidence
  intervals from multiple samples as generated by bootstrapping to
  original data.
\item
  enables systematic comparison of surrogate indexes designed to measure
  the same phenomenon.
\item
  it may even be possible to automate diagramatic explanations and
  documentation of the index.
\end{itemize}

Adoption of this pipeline approach would provide uniformity to the field
of index development, research and application.

\hypertarget{sec-pipeline}{%
\section{Details of the index pipeline}\label{sec-pipeline}}

In constructing various indexes, the primary aim is to transform the
data, often multivariate, into a univariate index. Spatial and temporal
considerations are also factored into the process when observational
units and time periods are not independent. However, despite the
variations in contextual information for indexes in different fields,
the underlying statistical methodology remains consistent across diverse
domains. Each index can be represented as a series of modular
statistical operations on the data. This allows us to decompose the
index construction process into a unified pipeline workflow with a
standardized set of data processing steps to be applied across different
indexes.

An overview of the pipeline is presented in
Figure~\ref{fig-pipeline-steps}, illustrating the nine available modules
designed to obtain the index from the data. These modules include
operations for temporal and spatial aggregation, variable transformation
and combination, distribution fitting, benchmark setting, and index
communication. Analysts have the flexibility to construct indexes by
connecting modules according to their preferences.

Now, we introduce the notation used for describing pipeline modules.
Consider multivariate spatio-temporal process,

\begin{equation}
\mathbf{x}(s;t) = \{x_1(s;t), x_2(s;t), \cdots, x_p(s;t)\} \qquad s \in D_s \subseteq \mathbb{R}^m, t \in D_t \subseteq \mathbb{R}^n 
\end{equation}

where:

\begin{itemize}
\item
  \(x_j(s, t)\) represents a variable of interest for example
  precipitation, \(j = 1, \cdots, p\) and
\item
  \(s\) represents the geographic locations in the space
  \(D_s \subseteq \mathbb{R}^m\). Examples of geographic locations
  include a collection of countries, longitude and latitude coordinates
  or regions of interest and,
\item
  \(t\) denotes the temporal order in \(D_t \subseteq \mathbb{R}^n\).
  For instance, time measurements could be recorded hourly, yearly,
  monthly, quaterly or by season.
\end{itemize}

In what follows when geographic or temporal components of the
\(x_j(s,t)\) process are fixed we will be using suffix notation. For
example, \(x_{sj}(t)\) represents the data for a fixed location \(s\) as
a function of time \(t\). While \(x_{tj}(s)\) denotes the spatial
varying process for a fixed \(t\). An overview of the notation for
pipeline input, operation, and output is present in
Table~\ref{tbl-notation}.

\hypertarget{tbl-notation}{}
\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0294}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2206}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1471}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2206}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.3824}}@{}}
\caption{\label{tbl-notation}An notation overview of the input,
operation, and output of each pipeline module.}\tabularnewline
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
No.
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Input
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Operation
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Output
\end{minipage} \\
\midrule()
\endfirsthead
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
No.
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Input
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Operation
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Output
\end{minipage} \\
\midrule()
\endhead
1 & Temporal processing & \(x_{sj}(t)\) & \(f[x_{sj}(t)]\) &
\(x^{\text{Temp}}_{sj}(t^\prime) \quad t^\prime \in D_{t^\prime}\) \\
2 & Spatial processing & \(x_{tj}(s)\) & \(g[x_{tj}(s)]\) &
\(x^{\text{Spat}}_{tj}(s^\prime) \quad s^\prime \in D_{s^\prime}\) \\
3 & Variable transformation & \(x_{j}(s; t)\) & \(T[x_j(s;t)]\) &
\(x^{\text{Trans}}_j(s;t)\) \\
4 & Scaling & \(x_j(s; t)\) & \([x_j(s;t) - \alpha]/\gamma\) &
\(x^{\text{Scale}}_j(s;t)\) \\
5 & Dimension reduction &
\(\mathbf{x}(s;t) \quad \mathbf{x} \subseteq \mathbb{R}^q,\; q\leq p\) &
\(h[\mathbf{x}(s;t)]\) &
\(\mathbf{y}(s;t) \quad \mathbf{y} \subseteq \mathbb{R}^d, d < q\) \\
6 & Distribution fit & \(x_j(s; t)\) & \(F[x_j(s;t)]\) &
\(p_j(s;t) \quad p(.) \in [0, 1]\) \\
7 & Normalising & \(x_j(s; t)\) & \(\Phi^{-1}[x_j(s; t)]\) &
\(z_j(s; t)\) \\
8 & Benchmarking & \(x_j(s; t)\) & \(u[x_j(s;t)]\) & \(b_j(s;t)\) \\
9 & Simplification & \(x_j(s; t)\) & \(v[x_j(s;t)]\) &
\(A_j(s;t) \in \{a_1, a_2, \cdots, a_j\}\) \\
\bottomrule()
\end{longtable}

\begin{figure}

{\centering \includegraphics[width=1\textwidth,height=0.9\textheight]{figures/pipeline-overall.png}

}

\caption{\label{fig-pipeline-steps}Diagram of pipeline modules for index
construction. The highlighted path illustrates one possible construction
using the dimension reduction and simplification module.}

\end{figure}

\hypertarget{temporal-processing}{%
\subsection{Temporal processing}\label{temporal-processing}}

The temporal processing module takes as input argument a single variable
\(x_{sj}(t)\) at location \(s\) as a function of time. In this step the
original time series can be transformed or summarized into a new one via
time aggregation, the transformation is represented by the function
\(f\), \(x^{\text{Temp}}_{sj}(t^\prime) = f[x_{sj}(t)]\) where
\(t^\prime\) refers to the new temporal resolution after aggregation. An
example of a temporal processing done in the computation of the
Standardized Precipitation Index (SPI), consists of summing the monthly
precipitation series over a rolling time window of size \(k\). That is
also known as the time scale. For SPI, the choice of the time scale
\(k\) is used to control the accumulation period for the water deficit,
enabling the assessment of drought severity across various types
(meteorological, agricultural, and hydrological).

\hypertarget{spatial-processing}{%
\subsection{Spatial processing}\label{spatial-processing}}

The spatial processing module takes a single variable with a fixed
temporal dimension, \(x_{tj}(s)\), as input. This step transforms the
variable from the original spatial dimension \(s\) into the new
dimension \(s^\prime \in D_{s^\prime}\) through
\(x^{\text{Spat}}_{tj}(s^\prime) = g[x_{tj}(s)]\). The change of spatial
dimension allows for the alignment of variables collected from different
measurements, such as in-situ stations and satellite imagery, or
originating from different resolutions. This also includes the
aggregation of variables into different levels, such as city, state, and
countries scales.

\hypertarget{variable-transformation}{%
\subsection{Variable transformation}\label{variable-transformation}}

Variable transformation takes input of a single variable \(x_j(s;t)\)
and reshapes its distribution using the function \(T[.]\) to produce
\(x^{\text{Trans}}_{j}(s;t)\). When a variable has a skewed
distribution, transformations such as log, square root, or cubic root
can adjust the distribution towards normality. For example, in Human
Development Index (HDI), a logarithmic transformation is applied to the
variable Gross National Income per capita (GNI), to reduce its impact on
HDI, particularly for countries with high GNI values.

\hypertarget{scaling}{%
\subsection{Scaling}\label{scaling}}

Unlike variable transformation, scaling maintains the distributional
shape of the variable. It includes techniques such as centering, z-score
standardisation, and min-max standardisation and can be expressed as
\([x_{j}(s;t) - \alpha]/\gamma\). In Human Development Index (HDI), the
three dimensions (health, education, and economy) are converted into the
same scale (0-1) using min-max standardisation.

\begin{figure}

{\centering \includegraphics{tidyindex_files/figure-pdf/fig-scale-var-trans-compare-1.pdf}

}

\caption{\label{fig-scale-var-trans-compare}Comparison of the module
scaling (green) and variable transformation (orange). While both modules
change the variable range, scaling maintains the same distributional
shape, which is not the case with variable transformation.}

\end{figure}

\hypertarget{dimension-reduction}{%
\subsection{Dimension reduction}\label{dimension-reduction}}

Dimension reduction takes the multivariate information
\(\mathbf{x}(s;t)\), where
\(\mathbf{x} \subseteq \mathbb{R}^q,\; q\leq p\), as the input. It
summarises the high-dimensional information into a lower dimension
representation \(\mathbf{y}(s;t)\), where \(y \subseteq \mathbb{R}^d\)
and \(d < q\), as the output. The transformation can be based on
domain-specific knowledge, originating from theories describing the
underlying physical processes, or guided in statistical methods. For
example, the Standardized Precipitation-Evapotranspiration Index (SPEI)
calculates the difference \(D\) between precipitation (\(P\)) and
potential evapotranspiration (\(\text{PET}\)), using a water balance
model (\(D = P - \text{PET}\)). This is the only step that differs from
the Standardized Precipitation Index (SPI).

\hypertarget{distribution-fit}{%
\subsection{Distribution fit}\label{distribution-fit}}

Distribution fit applies the Cumulative Distribution Function (CDF)
\(F\) of a distribution on the variable \(x_j(s; t)\) to obtain the
probability values \(p_j(s;t) \in [0, 1]\). In SPEI, many distributions,
including log-logistic, pearson III, lognormal, and general extreme
distribution, are candidates for the aggregated series. Different
fitting methods, and different goodness of fit tests may be used to
compare the distribution choice on the index value.

\hypertarget{normalising}{%
\subsection{Normalising}\label{normalising}}

Normalising applies the inverse normal CDF \(\Phi^{-1}\) on the input
data to obtain the normal density \(z_{j}(s;t)\). Normalising can
sometimes be confused with the scaling or variable transformation
module, which do not involve using a normal distribution to transform
the variable. It is arguably whether normalising and distribution fit
should be combined or separated into two modules. A decision has been
made to separate them into two modules given the different types of
output each module present (probability values for distribution fit and
normal density values for normalising).

\hypertarget{benchmarking}{%
\subsection{Benchmarking}\label{benchmarking}}

Benchmark sets a value \(b_j(s,t)\) for comparing against the original
variable \(x_j(s;t)\). This benchmark can be a fixed value consistently
across space and time or determined by the data through the function
\(u[x_j(s;t)]\). Once a benchmark being set, observations can be
highlighted for adjustments in other modules or can serve targets for
monitoring and planning.

\hypertarget{simplification}{%
\subsection{Simplification}\label{simplification}}

Simplification takes a continuous variable \(x_j(s;t)\) and categorises
it into a discrete set \(A_j(s;t) \in \{a_1, a_2, \cdots, a_j\}\)
through a piecewise function,

\begin{equation}
v[x_i(s;t)] = 
\begin{cases}
a_0 & C_1 \leq x^i(s; t) < C_0 \\
a_1 & C_2 \leq x^i(s; t) < C_1 \\
a_2 & C_3 \leq x^i(s; t) < C_2 \\
\cdots \\
a_z & C_z \leq x^i(s; t)
\end{cases}
\end{equation}

This is typically used at the end of the index pipeline to simplify the
index to communicate to the public the severity of the concept of
interest measured by the index. An example of simplification is to map
the calculated SPI to four categories: mild, moderate, severe, and
extreme drought.

\hypertarget{sec-dev}{%
\section{Software design}\label{sec-dev}}

The R package \texttt{tidyindex} implements the index pipeline modules
described in Section~\ref{sec-pipeline}. These modules compute an index
in a sequential manner, as shown below:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DATA }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{module1}\NormalTok{(...) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{module2}\NormalTok{(...) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{module3}\NormalTok{(...) }\SpecialCharTok{|\textgreater{}}
\NormalTok{  ...}
\end{Highlighting}
\end{Shaded}

Each module offers a variety of alternatives, each represented by a
distinct function. For example, within the
\texttt{dimension\_reduction()} module, three methods are available:
\texttt{aggregate\_linear()}, \texttt{aggregate\_geometrical()}, and
\texttt{manual\_input()} and they can be used as:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dimension\_reduction}\NormalTok{(}\AttributeTok{V1 =} \FunctionTok{aggregate\_linear}\NormalTok{(...))}
\FunctionTok{dimension\_reduction}\NormalTok{(}\AttributeTok{V2 =} \FunctionTok{aggregate\_geometrical}\NormalTok{(...))}
\FunctionTok{dimension\_reduction}\NormalTok{(}\AttributeTok{V3 =} \FunctionTok{manual\_input}\NormalTok{(...))}
\end{Highlighting}
\end{Shaded}

Each method can be independently evaluated as a recipe, for example,

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{manual\_input}\NormalTok{(}\SpecialCharTok{\textasciitilde{}}\NormalTok{x1 }\SpecialCharTok{+}\NormalTok{ x2)}
\end{Highlighting}
\end{Shaded}

takes a formula to combine the variable \texttt{x1} and \texttt{x2} and
will return:

\begin{verbatim}
[1] "manual_input"
attr(,"formula")
[1] "x1 + x2"
attr(,"class")
[1] "dim_red"
\end{verbatim}

This recipe will then be evaluated in the pipeline module with data to
obtain the numerical results. The package also offers wrapper functions
that combine multiple steps for specific indexes. For instance, the
\texttt{idx\_spi()} function bundles three steps (temporal aggregation,
distribution fit, and normalising) into a single command, simplifying
the syntax for computation. Analysts are also encouraged to create their
customised indexes from existing modules.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{idx\_spi }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(...)\{}
\NormalTok{  DATA }\SpecialCharTok{|\textgreater{}} 
    \FunctionTok{aggregate}\NormalTok{(...) }\SpecialCharTok{|\textgreater{}}
    \FunctionTok{dist\_fit}\NormalTok{(...) }\SpecialCharTok{|\textgreater{}} 
    \FunctionTok{augment}\NormalTok{(...)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{sec-examples}{%
\section{Examples}\label{sec-examples}}

This section uses the example of drought and social indexes to show the
analysis made possible with the index pipeline. The drought index
example computes two indexes (SPI and SPEI) with various time scales and
distributions simultaneously using the pipeline framework to understand
the flood and drought events in Queensland. The second example focuses
on the dimension reduction step in the Global Gender Gap Index to
explore how the changes of linear combination weights affect the index
values and country rankings.

\hypertarget{every-distribution-every-scale-every-index-all-at-once}{%
\subsection{Every distribution, every scale, every index all at
once}\label{every-distribution-every-scale-every-index-all-at-once}}

A common task for drought researchers is to compute indexes at different
parameter combinations. This can be used to identify the spatial and
temporal extent of drought events, recommend the best parameter choice,
or compare the effectiveness of indexes for monitoring drought. The
example below computes two indexes: SPI and SPEI, at various time scales
and fitted distributions, for stations in the state of Queensland in
Australia. The purpose of the example is to demonstrate the interfaces
the tidyindex package built to allow easy computing at different
parameter combinations.

The state of Queensland in Australia is frequently affected by natural
disaster events such as flood and drought, which can have significant
impacts on its agricultural industry. This study uses daily data from
Global Historical Climatology Network Daily (GHCND), accessed via the
package \texttt{rnoaa} to examine drought/flood condition in Queensland.
Daily data is average into monthly and stations are excluded if monthly
data contains missings, which is required for calculating both SPI and
SPEI. This gives 29 stations with complete records from 1990 January to
2022 April.

\begin{figure}

{\centering \includegraphics[width=1\textwidth,height=0.9\textheight]{figures/pipeline-spei.png}

}

\caption{\label{fig-pipeline-spei}Diagram of pipeline steps for index
construction. will need to be updated with better design and the
distribution fitting step.}

\end{figure}

The function \texttt{compute\_indexes()} can be used to collectively
compute multiple indexes. The tidyindex offers wrapper functions, with
the prefix idx\_, that simplify the calculation of commonly used indexes
by combining a set of pipeline steps into a single function. For
example, the function \texttt{idx\_spei()} includes the five steps
previously described in \textbf{?@sec-toy-example} (variable
transformation, dimension reduction, temporal aggregation, distribution
fit, and normalise). Each \texttt{idx\_xxx()} function specifies the
relevant parameters relevant to the index: the thornthwaite method is
used to calculate PET in SPEI, with the average temperature
(\texttt{tavg}) and latitude (\texttt{lat}) used as inputs. The SPEI is
computed at four time scales (6, 12, 24, and 36 months) and fitted with
two distributions (Log-logistic and General Extreme Value (GEV)). The
SPI is also computed at the same four time scales and uses the default
gamma distribution to fit the aggregated series.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{.scale }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{6}\NormalTok{, }\DecValTok{12}\NormalTok{, }\DecValTok{24}\NormalTok{, }\DecValTok{36}\NormalTok{)}
\NormalTok{idx }\OtherTok{\textless{}{-}}\NormalTok{ queensland }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{init}\NormalTok{(}\AttributeTok{id =}\NormalTok{ id, }\AttributeTok{time =}\NormalTok{ ym) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{compute\_indexes}\NormalTok{(}
    \AttributeTok{spei =} \FunctionTok{idx\_spei}\NormalTok{(}
      \AttributeTok{.pet\_method =} \StringTok{"thornthwaite"}\NormalTok{, }\AttributeTok{.tavg =}\NormalTok{ tavg, }\AttributeTok{.lat =}\NormalTok{ lat, }
      \AttributeTok{.scale =}\NormalTok{ .scale, }\AttributeTok{.dist =} \FunctionTok{c}\NormalTok{(}\FunctionTok{gev}\NormalTok{(), }\FunctionTok{loglogistic}\NormalTok{())),}
    \AttributeTok{spi =} \FunctionTok{idx\_spi}\NormalTok{(}\AttributeTok{.scale =}\NormalTok{ .scale)}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

The output from \texttt{compute\_indexes()} contains index values and
associated parameter in a long tibble. It includes the original
variables (\texttt{id}, \texttt{ym}, \texttt{prcp}, \texttt{tmax},
\texttt{tmin}, \texttt{tavg}, \texttt{long}, \texttt{lat}, and
\texttt{name}), index parameters (\texttt{.idx}, \texttt{.scale},
\texttt{.method}, and \texttt{.dist}), intermediate variables
(\texttt{pet}, \texttt{.agg}, and \texttt{.fitted}), and the final index
(\texttt{.index}). This data can be visualised across space or time, or
simultaneously, to explore the wet/dry condition in Queensland.
Figure~\ref{fig-compute-spatial} visualises the spatial distribution of
SPI at two periods (2010 October - 2011 March and 2019 October - 2020
March) with significant natural disaster events: 2010/11 Queensland
flood and 2019 Australia drought, which contributes to the notorious
2019/20 bushfire. Figure~\ref{fig-compute-temporal} displays the
sensitivity of the SPEI series for one particular station, Texas post
office, at different time scales and fitted distributions. These two
plots demonstrate some possibilities to explore the indexes after they
are computed from \texttt{compute\_indexes()}.

\begin{figure}

{\centering \includegraphics{tidyindex_files/figure-pdf/fig-compute-spatial-1.pdf}

}

\caption{\label{fig-compute-spatial}Spatial distribution of Standardized
Precipitation Index (SPI-12) in Queensland, Australia during two major
flood and drought events: 2010/11 and 2019/20. The map shows a continous
wet period during the 2010/11 flood period and a mitigated drought
situation, after its worst in 2019 December and 2020 Janurary, likely
due to the increased rainfall in February from the meteorological
record.}

\end{figure}

\begin{figure}

{\centering \includegraphics{tidyindex_files/figure-pdf/fig-compute-temporal-1.pdf}

}

\caption{\label{fig-compute-temporal}Time series plot of Standardized
Precipitation-Evapotranspiration Index (SPEI) at the Texas post office
station (highlighted by a diamond shape in panel a). The SPEI is
calculated at four time scales (6, 12, 24, and 36 months) and fitted
with two distributions (Log Logistic and GEV). The dashed line at -2
represents the class ``extreme drought'' by the SPEI. A larger time
scale gives a smoother index series, while also takes longer to recover
from an extreme situation as seen in the 2019/20 drought period. The
SPEI values from two distribution fits mostly agree, while GEV can
results in more extreme values, i.e.~in 1998 and 2020.}

\end{figure}

\hypertarget{does-a-minor-change-in-variable-weights-cause-a-tornado}{%
\subsection{Does a minor change in variable weights cause a
tornado?}\label{does-a-minor-change-in-variable-weights-cause-a-tornado}}

The Global Gender Gap Index (GGGI), published annually by the World
Economic Forum, measures gender parity by assessing relative gaps
between men and women in four key areas: Economic Participation and
Opportunity, Educational Attainment, Health and Survival, and Political
Empowerment (World Economic Forum 2023). The index, compiled from 14
variables expressed as female-to-male ratios, first aggregates these
variables into four dimensions through linear combinations. These
dimensions are then combined though another linear combination to form
the index. Figure~\ref{fig-pp-gggi} illustrates this pipeline
construction by applying the dimension reduction module twice on the
data to generate the index. Table~\ref{tbl-gggi-weights} presents the
variable weights (\texttt{V-weight}) and dimension weights
(\texttt{D-weight}) used in the two dimension reduction. In the table,
the variable weights are computed as the inverse of the standard
deviation of each variable, scaled to sum to 1. These weights ensure
that a one percentage point change in the standard deviation of each
variable to contribute equally to the index. Dimension weights are equal
across the four dimensions and the last column, \texttt{weight},
multiples the variable and dimension weights to produce a single set of
weight.

\begin{figure}

{\centering \includegraphics[width=1\textwidth,height=0.9\textheight]{figures/pipeline-gggi.png}

}

\caption{\label{fig-pp-gggi}Index pipeline for the Global Gender Gap
Index (GGGI). The index is constructed as applying the module dimension
reduction twice on the data.}

\end{figure}

\hypertarget{tbl-gggi-weights}{}
\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.5455}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1299}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1169}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1169}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0909}}@{}}
\caption{\label{tbl-gggi-weights}Weights used to compute the Global
Gender Gap Index}\tabularnewline
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Variable
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Dimension
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
V-weight
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
D-weight
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Weight
\end{minipage} \\
\midrule()
\endfirsthead
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Variable
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Dimension
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
V-weight
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
D-weight
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Weight
\end{minipage} \\
\midrule()
\endhead
Labour force participation & Economy & 0.199 & 0.25 & 0.050 \\
Wage equality for similar work & Economy & 0.310 & 0.25 & 0.078 \\
Estimated earned income & Economy & 0.221 & 0.25 & 0.055 \\
Legislators senior officials and managers & Economy & 0.149 & 0.25 &
0.037 \\
Professional and technical workers & Economy & 0.121 & 0.25 & 0.030 \\
Literacy rate & Education & 0.191 & 0.25 & 0.048 \\
Enrolment in primary education & Education & 0.459 & 0.25 & 0.115 \\
Enrolment in secondary education & Education & 0.230 & 0.25 & 0.058 \\
Enrolment in tertiary education & Education & 0.121 & 0.25 & 0.030 \\
Sex ratio at birth & Health & 0.693 & 0.25 & 0.173 \\
Healthy life expectancy & Health & 0.307 & 0.25 & 0.077 \\
Women in parliament & Politics & 0.310 & 0.25 & 0.078 \\
Women in ministerial positions & Politics & 0.247 & 0.25 & 0.062 \\
Years with female head of state & Politics & 0.443 & 0.25 & 0.111 \\
\bottomrule()
\end{longtable}

The 2023 GGGI data is available from the Global Gender Gap Report 2023
in the country's economy profile and can be accessed in R via the
\texttt{tidyindex} package as \texttt{gggi} and
Table~\ref{tbl-gggi-weights} as \texttt{gggi\_weights}. The index can be
reproduced with the pacakge as:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{gggi }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{init}\NormalTok{(}\AttributeTok{id =}\NormalTok{ country) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{add\_meta}\NormalTok{(gggi\_weights, }\AttributeTok{var\_col =}\NormalTok{ variable) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{dimension\_reduction}\NormalTok{(}
    \AttributeTok{index\_new =} \FunctionTok{aggregate\_linear}\NormalTok{(}
      \SpecialCharTok{\textasciitilde{}}\NormalTok{labour\_force\_participation}\SpecialCharTok{:}\NormalTok{years\_with\_female\_head\_of\_state,}
      \AttributeTok{weight =}\NormalTok{ weight)) }
\end{Highlighting}
\end{Shaded}

After initialising the \texttt{gggi} object and attaching the
\texttt{gggi\_weights} as metadata, a single linear combination step
within the dimension reduction module is applied to the 14 variables
(from column \texttt{labour\_force\_participation} to
\texttt{years\_with\_female\_head\_of\_state}), using the weight
specified in the \texttt{weight} column of the attached metadata. While
computing the index from the original 14 variables, it remains unclear
how the missing values are handled within the index, which impacts 68
out of the total 146 countries. However, after aggregating variables
into the four dimensions, where no missing values exist, the index is
reproducible for all the countries.

A linear combination can also be interpreted as a linear projection of
multivariate information with a weight vector. Projecting data from
higher to lower dimension unavoidably leads to information loss and the
weights used require careful examination to understand their effects on
the index and implications for interpretation and decision-making. By
making slight adjustments to the weight vector, we can observe how index
values and country rankings change. For illustration, we select a set
countries including:

\begin{enumerate}
\def\labelenumi{\arabic{enumi})}
\tightlist
\item
  Top-ranked countries with GGGI \textgreater{} 0.85,
\item
  Countries ranked between 57 and 62, with GGGI values from 0.72 to
  0.73, and
\item
  Low-ranked countries with GGGI \textless{} 0.6.
\end{enumerate}

We slightly vary the weight of the politics dimension from the original
0.25 while keeping the weights constant for the other three dimensions.
This process creates an animation showing the movement of index values
in response to changing weights. This visualisation technique, which
presents a sequence of data projections, is referred to as a ``tour''.
The specific kind of tour that moves between the original and nearby
projections is known as a ``local tour''.

In Figure~\ref{fig-idx-tour}, six frames have been chosen from the
animation available at https://vimeo.com/847874016. When the weight of
politics is reduced (Frame 1 and 6 vs.~Frame 12), the difference in GGGI
values between the top Nordic countries and mid- or low-ranked countries
narrows, suggesting a smaller variation among countries in achieving
gender parity. Conversely, when the weight of politics increases (Frame
18, 24, and 29 vs.~Frame 12), nearly all the countries in the three
categories experience a decrease in GGGI values. A noticeable exception
to this trend is Bangladesh, where its index value moves in the same
direction as the politics weight. This leads to its index value being
almost similar to those of the top-ranked Nordic countries when the
politics dimension is assigned a weight of 0.52 in Frame 29.

In GGGI, the index value has a direct interpretation as the percentage
of gender gap that has been closed. When countries exhibit closer index
values or consistent, it can be directly interpreted as a reflection of
a country's progress toward gender parity. Ideally, an index should be
robust against minor changes in its construction components. This
example provides researchers with means to observe changes in the index
resulting from variations in the weights used in linear combination.
This approach can be applied broadly to different sets of weights of
interest, extending beyond the change in a single dimension illustrated
by the example.

\begin{figure}

{\centering \includegraphics{tidyindex_files/figure-pdf/fig-idx-tour-1.pdf}

}

\caption{\label{fig-idx-tour}Six frames selected to explore how varying
the weights of the politics dimension changes the index values and
country rankings in Global Gender Gap Index (GGGI). The top panel shows
the GGGI value against the country, ranked by its original index value
in Frame 12. The bottom panel displays the weight used to produce the
index values in the top panel, with each frame corresponds to a set of
weights. Countries selected includes 1) top-ranked countries with GGGI
\textgreater{} 0.85, 2) countries ranked between 57 and 62 with GGGI
from 0.72 to 0.73, and 3) low-ranked countries with GGGI \textless{}
0.6. Compared to Frame 12 where equal weigts are used for the four
dimension, a reduced weight in politics (Frame 1 and 6) shows narrower
gaps between top and mid- or lower- ranked countries, while an increase
in the politics weight (Frame 18, 24, and 29) leads to a systematic
decrease of GGGI values across all the countries, except for Bangladesh.
Full animation is available at https://vimeo.com/847874016.}

\end{figure}

\hypertarget{conclusion}{%
\section{Conclusion}\label{conclusion}}

The paper presents a data pipeline with nine modules for constructing
and analysing indexes. The pipeline increases transparency in the
practice for index analysts to experiment with different index design
and parameter choices to better design and apply their indexes. The
significance of this work is its ability to provide a universal
framework for index construction, which can be applied across different
domains.

Examples have been given in the drought indexes and human development
index to demonstrate computing of indexes with different parameters
combinations and how alternative index design can provide insights to
understand distinctive country characteristics that could sometimes be
overlooked. The accompanied package, tidyindex, is not meant to provide
comprehensive implementation for all indexes across all domains.
Instead, it demonstrates implementing individual pipeline steps that are
versatile to multiple indexes and composing new indexes from existing
steps. Domain experts are welcomed to adopt the pipeline approach to
develop specialised packages for specific-domains indexes.

Future work: - integrate more complex dimension reduction methods to
calculate weights - strengthen the spatial processing module

\hypertarget{reference}{%
\section*{Reference}\label{reference}}
\addcontentsline{toc}{section}{Reference}

\hypertarget{refs}{}
\begin{CSLReferences}{1}{0}
\leavevmode\vadjust pre{\hypertarget{ref-buja_elements_1988}{}}%
Buja, A, D Asimov, C Hurley, and JA McDonald. 1988. {``Elements of a
Viewing Pipeline for Data Analysis.''} In \emph{Dynamic Graphics for
Statistics}, 277--308. Wadsworth, Belmont.

\leavevmode\vadjust pre{\hypertarget{ref-tidymodels}{}}%
Kuhn, Max, and Hadley Wickham. 2020. \emph{Tidymodels: A Collection of
Packages for Modeling and Machine Learning Using Tidyverse Principles.}
\url{https://www.tidymodels.org}.

\leavevmode\vadjust pre{\hypertarget{ref-oecd_handbook_2008}{}}%
OECD, European Union, and Joint Research Centre - European Commission.
2008. \emph{Handbook on {Constructing} {Composite} {Indicators}:
{Methodology} and {User} {Guide}}. OECD.
\url{https://doi.org/10.1787/9789264043466-en}.

\leavevmode\vadjust pre{\hypertarget{ref-sutherland_orca_2000}{}}%
Sutherland, Peter, Anthony Rossini, Thomas Lumley, Nicholas Lewin-Koh,
Julie Dickerson, Zach Cox, and Dianne Cook. 2000. {``Orca: {A}
{Visualization} {Toolkit} for {High}-{Dimensional} {Data}.''}
\emph{Journal of Computational and Graphical Statistics} 9 (3): 509--29.
\url{https://www.jstor.org/stable/1390943}.

\leavevmode\vadjust pre{\hypertarget{ref-wickham_tidy_2014}{}}%
Wickham, Hadley. 2014. {``Tidy {Data}.''} \emph{Journal of Statistical
Software} 59 (September): 1--23.
\url{https://doi.org/10.18637/jss.v059.i10}.

\leavevmode\vadjust pre{\hypertarget{ref-wickham_welcome_2019}{}}%
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy
D'Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019.
{``Welcome to the {Tidyverse}.''} \emph{Journal of Open Source Software}
4 (43): 1686. \url{https://doi.org/10.21105/joss.01686}.

\leavevmode\vadjust pre{\hypertarget{ref-wickham_plumbing_2009}{}}%
Wickham, Hadley, Michael Lawrence, Dianne Cook, Andreas Buja, Heike
Hofmann, and Deborah F. Swayne. 2009. {``The Plumbing of Interactive
Graphics.''} \emph{Computational Statistics} 24 (2): 207--15.
\url{https://doi.org/10.1007/s00180-008-0116-x}.

\leavevmode\vadjust pre{\hypertarget{ref-WEF2023}{}}%
World Economic Forum. 2023. {``{The Global Gender Gap Report 2023}.''}
\url{https://www3.weforum.org/docs/WEF_GGGR_2023.pdf}.

\leavevmode\vadjust pre{\hypertarget{ref-xie_reactive_2014}{}}%
Xie, Yihui, Heike Hofmann, and Xiaoyue Cheng. 2014. {``Reactive
{Programming} for {Interactive} {Graphics}.''} \emph{Statistical
Science} 29 (2): 201--13.
\url{https://www.jstor.org/stable/43288470?seq=1}.

\end{CSLReferences}



\end{document}
